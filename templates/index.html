{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>

    <!-- start: Meta -->
    <meta charset="utf-8">
    <title>Home</title>
    <meta http-equiv="Access-Control-Allow-Origin" content="*"/>
    <meta name="description" content="Bootstrap Metro Dashboard">
    <meta name="author" content="">
    <meta name="keyword" content="">
    <!-- end: Meta -->

    <!-- start: Mobile Specific -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- end: Mobile Specific -->

    <!-- start: CSS -->
    <link id="bootstrap-style" href="{% static "css/bootstrap.min.css" %}" rel="stylesheet">
    <link href="{% static "css/bootstrap-responsive.min.css" %}" rel="stylesheet">
    <link id="base-style" href="{% static "css/style.css" %}" rel="stylesheet">
    <link id="base-style-responsive" href="{% static "css/style-responsive.css" %}" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800&subset=latin,cyrillic-ext,latin-ext' rel='stylesheet' type='text/css'>
    <!-- end: CSS -->


    <!-- The HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
	  	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<link id="ie-style" href="css/ie.css" rel="stylesheet">
	<![endif]-->

    <!--[if IE 9]>
		<link id="ie9style" href="css/ie9.css" rel="stylesheet">
	<![endif]-->

    <!-- start: Favicon -->
    <link rel="shortcut icon" href="{% static "img/favicon.ico" %}">
    <!-- end: Favicon -->


</head>

<body>
<!-- start: Header -->
<div class="navbar">
    <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".top-nav.nav-collapse,.sidebar-nav.nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>
            <a class="brand" href="index.html"><span>Job Commit System</span></a>
        </div>
    </div>
</div>
<!-- start: Header -->
<div class="container-fluid-full">
    <div class="row-fluid">

        <!-- start: Main Menu -->
        <div id="sidebar-left" class="span2">
            <div class="nav-collapse sidebar-nav">
                <ul class="nav nav-tabs nav-stacked main-menu">
                    <!-- <li id="ch" value="Tiktok"><i class="icon-bar-chart"></i><span class="hidden-tablet"> Tiktok</span></li> -->
                    <li id="Tiktok" class="ch" value="TikTok"><a><i class="icon-bar-chart"></i><span class="hidden-tablet"> Tiktok</span></a></li>
                    <li id="YouTube" class="ch" value="YouTube"><a><i class="icon-envelope"></i><span class="hidden-tablet"> YouTube</span></a></li>
                    <li id="Instagram" class="ch" value="Instagram"><a><i class="icon-tasks"></i><span class="hidden-tablet"> Instagram</span></a></li>
                </ul>
            </div>
        </div>
        <!-- end: Main Menu -->

        <!-- start: Content -->
        <div id="content" class="span10">
            <h1 id="i3"></h1>
            <div class="row-fluid sortable">
                <div class="box span12">
                    <div class="box-header" data-original-title>
                        <h2><i class="halflings-icon white edit"></i><span class="break"></span>Job Commit</h2>
                        <div class="box-icon">
                            <a href="#" class="btn-setting"><i class="halflings-icon white wrench"></i></a>
                            <a href="#" class="btn-minimize"><i class="halflings-icon white chevron-up"></i></a>
                            <a href="#" class="btn-close"><i class="halflings-icon white remove"></i></a>
                        </div>
                    </div>
                    <div class="box-content">
                        <form class="form-horizontal" action="/api/jobs/set_jobs/" method="post">
                            {% csrf_token %}
                            <fieldset>

                                <input class="input-xlarge focused" id="channel_input" type="text" name="channel" style="display: none">

                                <div class="control-group">
                                    <label class="control-label">Account Select</label>
                                    <div class="controls">
                                        <select id="account_select" name="account">
                                        </select>
                                    </div>
                                </div>

                                <div class="control-group">
                                    <label class="control-label" for="selectError3">Frequency Select</label>
                                    <div class="controls">
                                        <select id="frequency_select" name="publish_freq">
                                            <option name="Once">Once</option>
                                            <option name="Everyday">Everyday</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="control-group">
                                    <label class="control-label" for="focusedInput">Publish Time Input</label>
                                    <div class="controls">
                                        <input class="input-xlarge focused" id="focusedInput" type="text" name="publish_time">
                                    </div>
                                </div>

                                <div class="control-group">
                                    <label class="control-label" for="focusedInput">Text Input</label>
                                    <div class="controls">
                                        <input class="input-xlarge focused" id="focusedInput" type="text" name="text">
                                    </div>
                                </div>

                                <div class="control-group">
                                    <label class="control-label" for="focusedInput">File Amount Input</label>
                                    <div class="controls">
                                        <input class="input-xlarge focused" id="focusedInput" type="text" name="file_amount">
                                    </div>
                                </div>


                                <div class="form-actions">
                                    <button type="submit" class="btn btn-primary">Save changes</button>
{#                                    <button class="btn">Cancel</button>#}
                                </div>
                            </fieldset>
                        </form>

                    </div>
                </div><!--/span-->

            </div><!--/.fluid-container-->

            <div class="row-fluid sortable">
                <div class="box span12">
                    <div class="box-header" data-original-title>
                        <h2><i class="halflings-icon white user"></i><span class="break"></span>Jobs Show</h2>
                        <div class="box-icon">
                            <a href="#" class="btn-setting"><i class="halflings-icon white wrench"></i></a>
                            <a href="#" class="btn-minimize"><i class="halflings-icon white chevron-up"></i></a>
                            <a href="#" class="btn-close"><i class="halflings-icon white remove"></i></a>
                        </div>
                    </div>
                    <div class="box-content">
                        <table class="table table-striped table-bordered bootstrap-datatable datatable">
                            <thead>
                            <tr>
                                <th>Channel</th>
                                <th>Account</th>
                                <th>Publish Frequency</th>
                                <th>Publish Time</th>
                                <th>Text</th>
                                <th>Video Amount</th>
                                <th>Job Status</th>
                                <th>Actions</th>
                            </tr>
                            </thead>
                            <tbody id="jobs_show">

                            </tbody>
                        </table>
                    </div>
                </div><!--/span-->

                <!-- end: Content -->
            </div><!--/#content.span10-->
        </div><!--/fluid-row-->

        <div class="modal hide fade" id="myModal">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">Ã—</button>
                <h3>Settings</h3>
            </div>
            <div class="modal-body">
                <p>Here settings can be configured...</p>
            </div>
            <div class="modal-footer">
                <a href="#" class="btn" data-dismiss="modal">Close</a>
                <a href="#" class="btn btn-primary">Save changes</a>
            </div>
        </div>

        <div class="clearfix"></div>
    </div>
</div>
<!-- start: JavaScript-->
<script src="{% static "js/jquery-1.9.1.min.js" %}"></script>
<script src="{% static "js/jquery-migrate-1.0.0.min.js" %}"></script>

<script src="{% static "js/jquery-ui-1.10.0.custom.min.js" %}"></script>

<script src="{% static "js/jquery.ui.touch-punch.js" %}"></script>

<script src="{% static "js/modernizr.js" %}"></script>

<script src="{% static "js/bootstrap.min.js" %}"></script>

<script src="{% static "js/jquery.cookie.js" %}"></script>

<script src='{% static "js/fullcalendar.min.js" %}'></script>

<script src='{% static "js/jquery.dataTables.min.js" %}'></script>

<script src="{% static "js/excanvas.js" %}"></script>
<script src="{% static "js/jquery.flot.js" %}"></script>
<script src="{% static "js/jquery.flot.pie.js" %}"></script>
<script src="{% static "js/jquery.flot.stack.js" %}"></script>
<script src="{% static "js/jquery.flot.resize.min.js" %}"></script>

<script src="{% static "js/jquery.chosen.min.js" %}"></script>
<script src="{% static "js/jquery.uniform.min.js" %}"></script>
<script src="{% static "js/jquery.cleditor.min.js" %}"></script>
<script src="{% static "js/jquery.noty.js" %}"></script>

<script src="{% static "js/jquery.elfinder.min.js" %}"></script>
<script src="{% static "js/jquery.raty.min.js" %}"></script>
<script src="{% static "js/jquery.iphone.toggle.js" %}"></script>
<script src="{% static "js/jquery.uploadify-3.1.min.js" %}"></script>
<script src="{% static "js/jquery.gritter.min.js" %}"></script>
<script src="{% static "js/jquery.imagesloaded.js" %}"></script>
<script src="{% static "js/jquery.masonry.min.js" %}"></script>
<script src="{% static "js/jquery.knob.modified.js" %}"></script>
<script src="{% static "js/jquery.sparkline.min.js" %}"></script>
<script src="{% static "js/counter.js" %}"></script>
<script src="{% static "js/retina.js" %}"></script>
<script src="{% static "js/custom.js" %}"></script>
<!-- end: JavaScript-->
<script>
    $(document).ready(function () {
        $(".ch").on("click", function () {
            $('#channel_input').val($(this).attr("id"));
            console.log($(this).attr("id"));
            $.ajax({
                url: "/api/jobs/get_accounts_list?channel=" + $(this).attr("id"),
                type: "GET",
                success: function (data) {
                    console.log(data);
                    $('#account_select').empty();

                    for (var i = 0; i < data.length; i++) {
                        $('#account_select').append("<option name='" + data[i]['user_id'] + "'>" + data[i]['user_id'] + "</option>")
                    }

                }
            });
            if ($(this).attr("id") == "Tiktok") {
                $(".ch#Tiktok").addClass("active");
                $(".ch#YouTube").removeClass("active");
                $(".ch#Instagram").removeClass("active");
            }
            if ($(this).attr("id") == "YouTube") {
                $(".ch#YouTube").addClass("active");
                $(".ch#Tiktok").removeClass("active");
                $(".ch#Instagram").removeClass("active");
            }
            if ($(this).attr("id") == "Instagram") {
                $(".ch#Instagram").addClass("active");
                $(".ch#YouTube").removeClass("active");
                $(".ch#Tiktok").removeClass("active");
            }
            $.ajax({
                url: "/api/jobs/get_jobs?channel=" + $(this).attr("id"),
                type: "GET",
                success: function (data) {
                    console.log(data);
                    $('#jobs_show').empty();

                    for (var i = 0; i < data.length; i++) {
                        $('#jobs_show').append(
                            '<tr>\n' +
                            '    <td class="center">' + data[i]["channel"] + '</td>\n' +
                            '    <td class="center">' + data[i]["account"] + '</td>\n' +
                            '    <td class="center">' + data[i]["publish_freq"] + '</td>\n' +
                            '    <td class="center">' + data[i]["publish_time"] + '</td>\n' +
                            '    <td class="center">' + data[i]["text"] + '</td>\n' +
                            '    <td class="center">' + data[i]["file_amount"] + '</td>\n' +
                            '    <td class="center">' + data[i]["status"] + '</td>\n' +
                            '    <td class="center">\n' +
                            '        <a class="btn btn-success" href=/api/jobs/delete_job?job_id='+data[i]["id"]+' style="width: auto">\n' +
                            '            <i class="halflings-icon white zoom-in" style="width: auto">delete</i>\n' +
                            '        </a>\n' +
                            '    </td>\n' +
{#                                   <a class="btn btn-info" href="#">#}
{#                                       <i class="halflings-icon white edit"></i>#}
{#                                   </a>#}
{#                                   <a class="btn btn-danger" href="#">#}
{#                                       <i class="halflings-icon white trash"></i>#}
{#                                   </a>#}
                            '</tr>'
                        )
                    }

                }
            })

        });
        $(".ch:first").click();

    });
</script>

</body>
</html>
